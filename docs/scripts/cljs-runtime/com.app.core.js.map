{"version":3,"sources":["com/app/core.cljs"],"mappings":";AAUA,4BAAA,wEAAA,2EAAA,+EAAA,gFAAA,8EAAA,wEAAA,4EAAA,4EAAA,5nBAAKA,4EACFC,yEACAC,+EACAC,+EACAC,kFACAC,wEACAC,4EACAC,4EACAC;AAGH,mBAAA,nBAAMC;AAAN,AAAA,0FAAA,0DAAA,2CAAA,uDAAA,2CAAA,mEAAA,kDAAA,yDAAA,IAAA,2DAAA,IAAA,kEAAA,6BAAA,0HAAA,vCAMIC,0HACAC;;AAGJ,8BAAA,9BAAMC,oEAAgBC;AAAtB,AACE,IAAMC,UAAQ,AAAWD;IACnBE,YAAU,AAACC,4CAAIhB,0BAAac;IAC5BG,cAAY,AAAA,iGAAA,AAAAC,gBAAeC;AAFjC,AAGE,oBAEEJ;AACA,AACE,AAAiBF;;AACjB,OAACO,6BAAgBL;;AALrB,GAQE,AAACM,6CAAEP,QAAQQ;AACX,AACE,AAAiBT;;AAEjB,GAAI,yDAAA,zDAACQ,6CAAEJ;AACL,OAACM;;AACD,OAACC;;;AAdP,GAiBE,AAACH,6CAAEP,QAAQW;AACX,AACE,AAAiBZ;;AACjB,OAACa;;AApBL,GAuBE,AAACL,6CAAEP,QAAQa;AACX,AACE,AAAiBd;;AACjB,OAACe;;AA1BL,GA6BE,AAACP,6CAAEP,QAAQe;AACX,AACE,AAAiBhB;;AACjB,OAACiB;;AAhCL,GAmCE,AAACT,6CAAEP,QAAQiB;AACX,AACE,AAAiBlB;;AACjB,GAAM,kJAAA,jJAAG,AAAA,oGAAA,AAAAK,gBAAiBC;AAA1B,AACE,OAACI;;AADH;;;AAtCJ,GA0CE,AAACF,6CAAEP,QAAQkB;AACX,AACE,AAAiBnB;;AACjB,GAAM,kJAAA,jJAAG,AAAA,oGAAA,AAAAK,gBAAiBC;AAA1B,AACE,OAACc;;AADH;;;AA7CJ;;;;;;;;;AAiDJ,wCAAA,xCAAMC;AAAN,AACE,OAACC,mBAAcC,SAAYC,8BAAkBzB;;AAG/C,+BAAA,/BAAM0B;AAAN,AACE,AAACV;;AACD,AAACM;;AACD,yGAAA,zGAACK;;AACD,gHAAA,zGAACA;;AAGH,+BAAA,/BAAMC;AAAN,AACE,wDAAA,jDAACC,oIAAahC,yBAAK,wBAAA,xBAACiC;;AAGtB,mBAAA,nBAAeC;AAAf,AACE,AAACL;;AACD,OAACE;;;AAGH,2BAAA,3BAAuBI;AAAvB,AACE,OAACJ;;AAGH","names":["com.app.core/key-mappings","goog.events.KeyCodes/UP","goog.events.KeyCodes/DOWN","goog.events.KeyCodes/LEFT","goog.events.KeyCodes/RIGHT","goog.events.KeyCodes/W","goog.events.KeyCodes/S","goog.events.KeyCodes/A","goog.events.KeyCodes/D","com.app.core/app","com.app.components/game-screen","com.app.components/completion-modal","com.app.core/handle-keydown","event","keycode","direction","cljs.core.get","game-status","cljs.core/deref","com.app.state/game-state","com.app.state/add-move!","cljs.core._EQ_","goog.events.KeyCodes/SPACE","com.app.state/next-level!","com.app.state/undo-move!","goog.events.KeyCodes/BACKSPACE","com.app.state/reset-moves!","goog.events.KeyCodes/R","com.app.state/reset-level!","goog.events.KeyCodes/H","com.app.state/toggle-solution!","goog.events.KeyCodes/N","goog.events.KeyCodes/P","com.app.state/prev-level!","com.app.core/setup-keyboard-listeners","goog.events/listen","js/document","goog.events.EventType/KEYDOWN","com.app.core/init-game!","cljs.core.println","com.app.core/mount-app!","reagent.dom.render","js/document.getElementById","com.app.core/run","com.app.core/start!"],"sourcesContent":["(ns com.app.core\r\n  (:require [reagent.core :as r]\r\n            [reagent.dom :as rdom]\r\n            [com.app.state :as state]\r\n            [com.app.components :as comp]\r\n            [goog.events :as events]\r\n            [goog.events.KeyCodes :as keycodes])\r\n  (:import [goog.events EventType KeyHandler]))\r\n\r\n;; \ud0a4 \uc785\ub825 \ub9e4\ud551\r\n(def key-mappings\r\n  {keycodes/UP    :up\r\n   keycodes/DOWN  :down\r\n   keycodes/LEFT  :left\r\n   keycodes/RIGHT :right\r\n   keycodes/W     :up      ; WASD \uc9c0\uc6d0\r\n   keycodes/S     :down\r\n   keycodes/A     :left\r\n   keycodes/D     :right})\r\n\r\n;; \uba54\uc778 \uc571 \ucef4\ud3ec\ub10c\ud2b8\r\n(defn app []\r\n  [:div.app\r\n   {:style {:font-family \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\"\r\n            :margin \"0\"\r\n            :padding \"0\"\r\n            :box-sizing \"border-box\"}}\r\n   [comp/game-screen]\r\n   [comp/completion-modal]])\r\n\r\n;; \ud0a4\ubcf4\ub4dc \uc774\ubca4\ud2b8 \ud578\ub4e4\ub7ec\r\n(defn handle-keydown [event]\r\n  (let [keycode (.-keyCode event)\r\n        direction (get key-mappings keycode)\r\n        game-status (:game-status @state/game-state)]\r\n    (cond\r\n      ;; \ubc29\ud5a5\ud0a4 \uc785\ub825\r\n      direction\r\n      (do\r\n        (.preventDefault event)\r\n        (state/add-move! direction))\r\n      \r\n      ;; \uc2a4\ud398\uc774\uc2a4\ubc14 \ucc98\ub9ac\r\n      (= keycode keycodes/SPACE)\r\n      (do\r\n        (.preventDefault event)\r\n        ;; \uc644\ub8cc \uc0c1\ud0dc\uc77c \ub54c\ub294 \ub2e4\uc74c \ub808\ubca8\ub85c, \uc544\ub2c8\uba74 \ub418\ub3cc\ub9ac\uae30\r\n        (if (= game-status :completed)\r\n          (state/next-level!)\r\n          (state/undo-move!)))\r\n      \r\n      ;; \ubc31\uc2a4\ud398\uc774\uc2a4 - \ucd08\uae30\ud654\r\n      (= keycode keycodes/BACKSPACE)\r\n      (do\r\n        (.preventDefault event)\r\n        (state/reset-moves!))\r\n      \r\n      ;; R\ud0a4 - \ub808\ubca8 \ub9ac\uc14b\r\n      (= keycode keycodes/R)\r\n      (do\r\n        (.preventDefault event)\r\n        (state/reset-level!))\r\n      \r\n      ;; H\ud0a4 - \ud78c\ud2b8 \ud1a0\uae00\r\n      (= keycode keycodes/H)\r\n      (do\r\n        (.preventDefault event)\r\n        (state/toggle-solution!))\r\n      \r\n      ;; N\ud0a4 - \ub2e4\uc74c \ub808\ubca8 (\uce58\ud2b8)\r\n      (= keycode keycodes/N)\r\n      (do\r\n        (.preventDefault event)\r\n        (when (< (:current-level @state/game-state) 10)\r\n          (state/next-level!)))\r\n      \r\n      ;; P\ud0a4 - \uc774\uc804 \ub808\ubca8\r\n      (= keycode keycodes/P)\r\n      (do\r\n        (.preventDefault event)\r\n        (when (> (:current-level @state/game-state) 1)\r\n          (state/prev-level!))))))\r\n\r\n;; \ud0a4\ubcf4\ub4dc \uc774\ubca4\ud2b8 \ub9ac\uc2a4\ub108 \uc124\uc815\r\n(defn setup-keyboard-listeners []\r\n  (events/listen js/document EventType.KEYDOWN handle-keydown))\r\n\r\n;; \uac8c\uc784 \ucd08\uae30\ud654\r\n(defn init-game! []\r\n  (state/reset-level!)\r\n  (setup-keyboard-listeners)\r\n  (println \"\ud83c\udfae PARALLEL WOARD game has started!\")\r\n  (println \"\ud83d\udca1 Click the 'How to Play' button to learn how to play!\"))\r\n\r\n;; \uc571 \ub9c8\uc6b4\ud2b8 \ud568\uc218\r\n(defn mount-app! []\r\n  (rdom/render [app] (js/document.getElementById \"app\")))\r\n\r\n;; \uba54\uc778 \uc9c4\uc785\uc810\r\n(defn ^:export run []\r\n  (init-game!)\r\n  (mount-app!))\r\n\r\n;; \uac1c\ubc1c\uc6a9 \ud56b \ub9ac\ub85c\ub4dc\r\n(defn ^:dev/after-load start! []\r\n  (mount-app!))\r\n\r\n;; \uac1c\ubc1c\uc6a9 \ud5ec\ud37c \ud568\uc218\ub4e4\r\n(comment\r\n  ;; \ub514\ubc84\uae45\uc6a9 \ud568\uc218\ub4e4\r\n  (defn debug-state []\r\n    (js/console.log \"\ud604\uc7ac \uac8c\uc784 \uc0c1\ud0dc:\" @state/game-state))\r\n  \r\n  (defn debug-boards []\r\n    (js/console.log \"\ud604\uc7ac \ubcf4\ub4dc\ub4e4:\" (state/get-updated-boards)))\r\n  \r\n  (defn skip-to-level [level]\r\n    (swap! state/game-state assoc :current-level level)\r\n    (state/reset-level!))\r\n  \r\n  ;; \uc0ac\uc6a9 \uc608\uc2dc:\r\n  ;; (skip-to-level 5)\r\n  ;; (debug-state)\r\n  ;; (debug-boards)\r\n  )"]}